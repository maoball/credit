"use client"

import { MarkdownRenderer } from "@/components/common/docs/markdown-renderer"
import { TableOfContents } from "@/components/common/docs/toc"

const CONTENT = `
## 1. 如何使用商户收款
LINUX DO PAY 为开发者和商家提供了简单高效的收款解决方案。只需几步即可接入：

### 1.1 创建商户应用

- **开启商户中心**

    点击前往 [商户中心](/merchant)，点击顶部右侧的 **创建应用** 按钮。根据实际情况填写您的应用名称、应用主页、回调地址和通知地址等，完成收款应用的创建。

- **获取 API 配置**

    创建成功后，在商户中心顶部右侧的选择器中选择您的应用。您将在 **API 配置** 面板中看到：
    - \`Client ID\`：商户客户端ID，用于标识您的身份。
    - \`Client Secret\`：商户客户端密钥，用于签名验证，请妥善保管，切勿泄露。

- **编辑应用信息**

    在商户中心顶部右侧的选择器中选择您的应用。您可以在 **应用管理** 面板中随时编辑您的应用。

### 1.2 接入平台支付
我们提供多种接入方式，分别适用于有开发能力的商户和普通商户。

#### 1.2.1 API 接口接入

LINUX DO PAY 支付全面兼容 **EasyPay (易支付)** 接口协议。您可以直接使用现有的易支付 SDK 或插件。
- 接口文档参考：[API 接口文档](/docs/api)
- 核心流程：生成签名 -> POST 请求 \`/pay/submit.php\` -> 跳转 LINUX DO PAY 收银台 -> 接收 \`notify_url\` 回调。

#### 1.2.2 平台在线收款

如果您无法进行代码开发，或者只需创建一个简单的收款链接，可以使用平台的 **在线收款** 功能。
- **创建商品**：在商户中心点击 **在线收款** 功能，创建在线商品收款。
- **分享链接**：创建后会生成唯一支付链接，发送给需要付款的客户。

#### 1.2.3 接入 New API

LINUX DO PAY 兼容 EasyPay 接口协议，因此公益站站长可以直接集成。
1. **创建商户APP**：

    点击前往 [商户中心](/merchant)，点击顶部右侧的 **创建应用** 按钮。填写您的 New API 站点信息：
    - 应用名称：\`您的应用名称\`
    - 应用主页：\`https://{您的域名}/\`
    - 回调地址：\`https://{您的域名}/console/log\`
    - 通知地址：\`https://{您的域名}/api/user/epay/notify\`

2. **前往系统设置**：在 New API 站点的系统设置中找到 **支付设置**。
3. **配置 LINUX DO PAY 支付**：
    - 支付地址：\`http://pay.linux.do/epay/pay\`
    - 易支付商户ID：\`您的 Client ID\`
    - 易支付商户密钥：\`您的 Client Secret\`
    - 回调地址：\`https://{您的域名}/\`
    - 充值方式设置：
    \`\`\`json
    [{"color":"rgba(var(--semi-blue-5), 1)","name":"支付宝","type":"alipay"},{"color":"rgba(var(--semi-green-5), 1)","name":"微信","type":"wxpay"},{"color":"black","name":"Linux Do  Pay","type":"epay"}]
    \`\`\`

## 2. 如何使用平台支付
作为消费者用户，在支持 LINUX DO PAY 的商家消费时，您将体验到流畅的支付流程：

1. **确认订单**

   在收银台页面，您会看到醒目的订单金额（LDC）和收款方信息。请核对金额与商家名称是否正确。
   
2. **支付验证**

   系统将引导您完成支付，将直接使用您的平台账户余额进行支付。
   
3. **支付结果** 
    - **成功**：显示支付成功状态，并自动跳转回商家网站。
    - **失败/取消**：您可以重新发起支付。
   
4. **账单查询**
   您可以在 **交易** 中查看每一笔支出的详情、状态及对应商家。

## 3. 商户手续费说明
为了维持良好的平台交易管理机制，我们按照行业标准收取手续费费。

- **承担方**
    
    手续费默认**由商家承担**。用户实际支付金额 = 订单金额，不会产生额外费用。

- **费率计算**
  \`\`\`text
  手续费 = 订单金额 × 当前费率
  商家实际到账 = 订单金额 - 手续费
  \`\`\`

- **动态费率**：

    费率并非固定不变，会根据商家的交易流水、信誉等级或平台活动进行动态调整。

## 4. 如何使用争议功能？
我们致力于保障买卖双方的合法权益。当交易出现纠纷（如未发货、商品不符）时，可使用争议功能。

### 4.1 发起争议 (用户)

如果您对已支付的订单有异议：

1. 进入 **交易记录** 页面。
2. 找到对应订单，点击 **详情** 或 **发起争议** 图标。
3. 填写争议理由（如“未收到货”），并提交。

*注意：发起争议后，相关资金可能会被暂时冻结，直到争议解决。*

### 4.2 处理争议 (商户)
作为商家，您需要及时响应用户的争议请求：

1. 在商户中心或通知中查看到 **待处理的争议**。
2. 查看用户理由，选择操作：
   - **同意退款**：认可用户诉求，资金原路退回给用户。
   - **拒绝/申诉**：如果您认为已履约，请提交相关证据（如发货日志）。
   
> **重要**：建议买卖双方优先通过沟通解决。长时间未处理的争议会由平台管理员介入仲裁，这可能会影响您的商户信誉。

## 5. 如何进行用户转账

您可以直接向平台内的其他用户进行 LDC 转账，无需通过商户接口。

1. 进入 **交易** 页面，选择 **转账**。
2. 填写收款人信息：
   - **收款人账户**：对方的用户名
   - **收款人 ID**：对方的用户ID，确保资金去向准确
   - **金额**：转账数额
3. 验证安全密码后，资金将实时到账。

> **重要**：请勿滥用转账系统进行交易、集资、刷号等行为，审计系统发现此类行为会立即封禁相关账户！

## 6. 关于社区积分
您的 LDC 余额包含 **社区积分 (Community Balance)**。
- **基本获取方式**：通过在 LINUX DO 社区的活跃行为（发帖、点赞等）获得。
- **划转规则**：
  - 社区积分每日凌晨 **00:00** 自动划转至可用余额。
  - 划转前不可用于交易或转账。
  - 目前划转**免手续费**。

## 7. 账户设置
您可以在 **设置 (Settings)** 页面管理您的账户：
- **个人资料**：查看当前的账户信息和信任等级。
- **安全设置**：修改支付密码。
- **通知设置**：暂未上线。
- **外观设置**：切换主题模式。
`

export default function HowToUsePage() {
  return (
    <div className="container max-w-8xl mx-auto px-4 py-8 lg:px-8">
      <div className="grid grid-cols-1 lg:grid-cols-[1fr_240px] gap-10">
        <main className="min-w-0 pb-[60vh]">
          <MarkdownRenderer content={CONTENT} />
        </main>
        <aside className="hidden lg:block relative">
          <div className="sticky top-24">
            <TableOfContents content={CONTENT} />
          </div>
        </aside>
      </div>
    </div>
  )
}
